From: Chris Lamb <lamby@debian.org>
Date: Tue, 15 Sep 2020 11:50:28 +0100
Subject: Make the build reproducible
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: 8bit

The Reproducible Builds effort <https://reproducible-builds.org/>
noticed that evince could not be built reproducibly.

This is because it generates .h header files that contain the absolute
build path via the @filename@ placeholder.

Use @basename@ instead â€” these are comments, after all.

Bug-Debian: https://bugs.debian.org/970383
Forwarded: https://gitlab.gnome.org/GNOME/evince/-/merge_requests/286
---
 libdocument/ev-document-type-builtins.c.template | 2 +-
 libdocument/ev-document-type-builtins.h.template | 2 +-
 libview/ev-view-type-builtins.c.template         | 2 +-
 libview/ev-view-type-builtins.h.template         | 2 +-
 4 files changed, 4 insertions(+), 4 deletions(-)

diff --git a/libdocument/ev-document-type-builtins.c.template b/libdocument/ev-document-type-builtins.c.template
index c355aff..0449b76 100644
--- a/libdocument/ev-document-type-builtins.c.template
+++ b/libdocument/ev-document-type-builtins.c.template
@@ -6,7 +6,7 @@
 /*** END file-header ***/
 
 /*** BEGIN file-production ***/
-/* enumerations from "@filename@" */
+/* enumerations from "@basename@" */
 #include "@filename@"
 /*** END file-production ***/
 
diff --git a/libdocument/ev-document-type-builtins.h.template b/libdocument/ev-document-type-builtins.h.template
index 4b70c87..4c52f8c 100644
--- a/libdocument/ev-document-type-builtins.h.template
+++ b/libdocument/ev-document-type-builtins.h.template
@@ -14,7 +14,7 @@ G_BEGIN_DECLS
 
 /*** BEGIN file-production ***/
 
-/* enumerations from "@filename@" */
+/* enumerations from "@basename@" */
 /*** END file-production ***/
 
 /*** BEGIN value-header ***/
diff --git a/libview/ev-view-type-builtins.c.template b/libview/ev-view-type-builtins.c.template
index 01ca13a..9f5cdb9 100644
--- a/libview/ev-view-type-builtins.c.template
+++ b/libview/ev-view-type-builtins.c.template
@@ -6,7 +6,7 @@
 /*** END file-header ***/
 
 /*** BEGIN file-production ***/
-/* enumerations from "@filename@" */
+/* enumerations from "@basename@" */
 #include "@filename@"
 /*** END file-production ***/
 
diff --git a/libview/ev-view-type-builtins.h.template b/libview/ev-view-type-builtins.h.template
index c4ba497..5625cf1 100644
--- a/libview/ev-view-type-builtins.h.template
+++ b/libview/ev-view-type-builtins.h.template
@@ -14,7 +14,7 @@ G_BEGIN_DECLS
 
 /*** BEGIN file-production ***/
 
-/* enumerations from "@filename@" */
+/* enumerations from "@basename@" */
 /*** END file-production ***/
 
 /*** BEGIN value-header ***/
