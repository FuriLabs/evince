From: Alexander Mikhaylenko <alexm@gnome.org>
Date: Wed, 5 Jan 2022 23:24:36 +0500
Subject: previewer: Support dark style preference

(cherry picked from commit b0e9f1db72a6761e737dadbf63dfa245581f4ea2)
---
 previewer/ev-previewer.c | 5 +++++
 previewer/meson.build    | 2 +-
 2 files changed, 6 insertions(+), 1 deletion(-)

diff --git a/previewer/ev-previewer.c b/previewer/ev-previewer.c
index 06ca7ab..4881714 100644
--- a/previewer/ev-previewer.c
+++ b/previewer/ev-previewer.c
@@ -23,6 +23,7 @@
 
 #include <gtk/gtk.h>
 #include <glib/gi18n.h>
+#include <handy.h>
 #include <evince-document.h>
 #include <evince-view.h>
 
@@ -115,6 +116,10 @@ open_cb (GApplication *application,
         if (n_files != 1) {
                 g_application_quit (application);
                 return;
+
+        hdy_init ();
+        hdy_style_manager_set_color_scheme (hdy_style_manager_get_default (),
+                                            HDY_COLOR_SCHEME_PREFER_LIGHT);
         }
 
         file = files[0];
diff --git a/previewer/meson.build b/previewer/meson.build
index 38ae668..e9c973e 100644
--- a/previewer/meson.build
+++ b/previewer/meson.build
@@ -19,7 +19,7 @@ sources += gnome.compile_resources(
   export: true,
 )
 
-deps = [libevmisc_dep]
+deps = [libevmisc_dep, hdy_dep]
 
 if enable_gtk_unix_print
   deps += gtk_unix_print_dep
